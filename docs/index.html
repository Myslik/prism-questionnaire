<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Questionnaire</title>

  <!-- styling shared by both variants -->
  <link rel="stylesheet" href="style.css" />

  <!-- petite-vue (Vue 3 reactivity in 6 kB) -->
  <script type="module" src="https://unpkg.com/petite-vue@0.4.1?module"></script>
</head>

<body>
  <!-- everything happens inside one custom-styled container -->
  <section id="questionnaire" class="questionnaire">

    <!-- Krok badge -->
    <div class="q-badge">Krok {{ currentStep }}</div>

    <!-- beige card with header, list -->
    <div class="q-stage">

      <header class="q-header">
        <h2>{{ header }}</h2>
        <small>{{ subheader }}</small>
      </header>

      <!-- questions or contact form based on step type ------------------- -->
      <div v-if="currentStepData.type === 'questions'">
        <ol class="q-list">
          <li v-for="(q, i) in questions" :key="i" class="q-item">
            <span class="q-num">{{ i + 1 }}.</span>
            <span class="q-text">{{ q }}</span>

            <!-- "square" to record answer: a 1-6 number picker for now -->
            <input class="q-score" type="number" min="1" max="6" v-model.number="answers[currentStepIndex + '_' + i]" />
          </li>
        </ol>
      </div>

      <!-- contact form -------------------------------------------------- -->
      <div v-if="currentStepData.type === 'contact'" class="q-contact-form">
        <div class="q-contact-row">
          <div class="q-contact-field">
            <label for="firstName">Jméno <span class="required">*</span></label>
            <input type="text" id="firstName" v-model="contactInfo.firstName" required>
          </div>
          <div class="q-contact-field">
            <label for="lastName">Příjmení <span class="required">*</span></label>
            <input type="text" id="lastName" v-model="contactInfo.lastName" required>
          </div>
        </div>
        <div class="q-contact-row">
          <div class="q-contact-field">
            <label for="email">Email <span class="required">*</span></label>
            <input type="email" id="email" v-model="contactInfo.email" required>
          </div>
          <div class="q-contact-field">
            <label for="phone">Telefon (nepovinné)</label>
            <input type="tel" id="phone" v-model="contactInfo.phone">
          </div>
        </div>
        <div class="q-contact-row">
          <div class="q-contact-field">
            <label for="goal">S čím byste chtěl/a, aby vám tento výstup z PRISM pomohl?</label>
            <input type="text" id="goal" v-model="contactInfo.goal">
          </div>
          <div class="q-contact-field"></div>
        </div>
      </div>
    </div>

    <!-- Navigation buttons -------------------------------------------- -->
    <div class="q-navigation">
      <button v-if="!isFirstStep" class="q-back" @click="previousStep">
         Předchozí
      </button>
      <button class="q-submit" @click="nextStep">
        {{ isLastStep ? 'Vytvořit zprávu' : 'Následující' }}
      </button>
    </div>
  </section>

  <!-- business logic -->
  <script type="module" src="questionnaire.js"></script>
</body>

</html>